<!DOCTYPE html>
<html lang="en">

    <head>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.4.8/socket.io.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>  
        <script scr="/socket.io/socket.io.js"></script>       
        <title>
          Project 2: Flack Chat
        </title>
    </head>

    <body>
        {% if session.username %} 
            <a id="newChannel" class="nav-link" href="/"> Create new channel</a>
            Channels :
            <br><br>
            {% for channel in channels %}
                <a href="/channels/{{ channel }}">{{ channel }}</a>
            {% endfor %}
            <br><br>
            WELCOME, {{ session.username }}
            <br><br><br>
            <a id="logout"href="/logout">Logout</a>              
        {% endif %}            
        <br><br>
        <h2>Create a new channel or join an existent one!</h2>
        <br><br>

        <form action="/create" method="post">    
            <input type="text" class="form-control" name="channel" id="channel" autofocus>
            <button type="submit">Create</button>
        </form>
    
        <script>
            if (localStorage.getItem('last_channel')) {
                let channel = localStorage.getItem('last_channel');    
                window.location.replace('/channels/' + channel);   
            }
        </script>
    </body>

</html>